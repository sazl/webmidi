<!doctype html>
<html>

<head>
    <link rel="stylesheet" href="main.css" />
</head>

<body>

    <div id="app">
        <div class="transport-controls">
            <button v-on:click="startSequence" :disabled="sequencerRunning">
                Start
            </button>

            <button v-on:click="stopSequence" :disabled="!sequencerRunning">
                Stop
            </button>

            <button v-on:click="clearSequence">
                Clear
            </button>

            <div class="sequencer-activity" v-bind:class="{ 'sequencer-activity--running': sequencerRunning }">
                {{ sequencerRunning ? 'R' : 'S' }}
            </div>
        </div>


        <div class="midi-input-controls">
            <label for="midi-input">MIDI Input</label>
            <select v-model="midiInputId">
                <option disabled value="">Please select one</option>
                <option v-for="option in midiInputs" v-bind:value="option.id">
                    {{ option.name }}
                </option>
            </select>
        </div>

        <div class="midi-output-controls">
            <label for="midi-output">MIDI Output</label>
            <select v-model="midiOutputId" name="midi-output">
                <option disabled value="">Please select one</option>
                <option v-for="option in midiOutputs" v-bind:value="option.id">
                    {{ option.name }}
                </option>
            </select>
        </div>

        <div class="timer-controls">
            <label for="timer-resolution">Timer Resolution</label>
            <input type="range" name="timer-resolution" min="0" max="200" v-model.number="timerResolution"></input>
            <span>{{ timerResolution }}</span>
        </div>

        <div class="note-controls">
            <label for="note-length">Note Length</label>
            <input type="range" name="note-length" min="0" max="0.1" step="0.01" v-model.number="noteLength"></input>
            <span>{{ noteLength }}</span>
        </div>

        <div class="bpm-controls">
            <label for="bpm">BPM</label>
            <input type="range" name="bpm" min="0" max="360" v-model.number="bpm"></input>
            <span>{{ bpm }}</span>
        </div>

        <div class="velocity-controls">
            <label for="velocity">Velocity</label>
            <input type="range" name="velocity" min="0" max="127" v-model.number="velocity"></input>
            <span>{{ velocity }}</span>
        </div>

        <div class="sequencer">
            <div class="sequencer-info">
                <div>
                    Current Index: {{ currentIndex }}
                </div>
                <div>
                    Sequence Length: {{ sequence.length }}
                </div>
            </div>
            <ul class="sequencer-list">
                <li v-for="(element, index) in sequence" class="sequencer-element" v-bind:key="element.id"
                    v-bind:class="{ 'sequencer-element--active': element.active }">
                    {{ element.note }}
                </li>
            </ul>
        </div>
    </div>

    <script src="./webmidi.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>

    <script src="./circular-buffer.js" type="text/javascript"></script>
    <script src="./native.js" type="text/javascript"></script>
    </script>
</body>

</html>